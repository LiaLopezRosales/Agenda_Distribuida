[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;34m  VerificaciÃ³n de Sistema Distribuido - Agenda RAFT[0m
[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;32m[1/6] Verificando estado del cluster...[0m

  [0;32mâœ…[0m agenda-1 (puerto 8080): [0;32mLÃDER[0m (term: agenda-1)
  [0;34mâ„¹ï¸[0m  agenda-2 (puerto 8082): seguidor (lÃ­der: agenda-1)
  [0;34mâ„¹ï¸[0m  agenda-3 (puerto 8083): seguidor (lÃ­der: agenda-1)
  [0;34mâ„¹ï¸[0m  agenda-4 (puerto 8084): seguidor (lÃ­der: agenda-1)

[0;32mâœ… LÃ­der identificado: agenda-1 (puerto 8080)[0m

[0;32m[2/6] Verificando estado de replicaciÃ³n RAFT...[0m

  [0;34mğŸ“Š[0m agenda-1 (puerto 8080):
     Term: 4 | Commit: 2 | Applied: 2 | Log entries: 2
  [0;34mğŸ“Š[0m agenda-2 (puerto 8082):
     Term: 4 | Commit: 2 | Applied: 2 | Log entries: 2
  [0;34mğŸ“Š[0m agenda-3 (puerto 8083):
     Term: 4 | Commit: 2 | Applied: 2 | Log entries: 2
  [0;34mğŸ“Š[0m agenda-4 (puerto 8084):
     Term: 4 | Commit: 2 | Applied: 2 | Log entries: 2

[0;32m[3/6] Creando usuario de prueba en el lÃ­der...[0m
  [0;32mâœ…[0m Usuario creado: test_user_1764959511 (ID: 3)
  [0;32mâœ…[0m Token de autenticaciÃ³n obtenido

[0;32m[4/6] Verificando replicaciÃ³n del usuario en todos los nodos...[0m

  [0;32mâœ…[0m agenda-1 (puerto 8080): usuario encontrado (ID: 3)
  [0;32mâœ…[0m agenda-2 (puerto 8082): usuario encontrado (ID: 3)
  [0;32mâœ…[0m agenda-3 (puerto 8083): usuario encontrado (ID: 3)
  [0;32mâœ…[0m agenda-4 (puerto 8084): usuario encontrado (ID: 3)
[0;32mâœ… Usuario replicado correctamente en todos los nodos[0m

[0;32m[5/6] Creando cita de prueba...[0m
  [0;32mâœ…[0m Cita creada: ID 3 (creada en puerto 8082)
[0;32m[6/6] Verificando replicaciÃ³n de la cita en todos los nodos...[0m

  [0;32mâœ…[0m agenda-1 (puerto 8080): cita encontrada (ID: 3, tÃ­tulo: Cita de Prueba ReplicaciÃ³n)
  [0;32mâœ…[0m agenda-2 (puerto 8082): cita encontrada (ID: 3, tÃ­tulo: Cita de Prueba ReplicaciÃ³n)
  [0;32mâœ…[0m agenda-3 (puerto 8083): cita encontrada (ID: 3, tÃ­tulo: Cita de Prueba ReplicaciÃ³n)
  [0;32mâœ…[0m agenda-4 (puerto 8084): cita encontrada (ID: 3, tÃ­tulo: Cita de Prueba ReplicaciÃ³n)
[0;32mâœ… Cita replicada correctamente en todos los nodos[0m

[0;32m[7/7] Creando grupo de prueba y verificando replicaciÃ³n...[0m
  [0;32mâœ…[0m Grupo creado en el lÃ­der
  [0;32mâœ…[0m agenda-1 (puerto 8080): grupo encontrado (nombre: Grupo Prueba ReplicaciÃ³n)
  [0;32mâœ…[0m agenda-2 (puerto 8082): grupo encontrado (nombre: Grupo Prueba ReplicaciÃ³n)
  [0;32mâœ…[0m agenda-3 (puerto 8083): grupo encontrado (nombre: Grupo Prueba ReplicaciÃ³n)
  [0;32mâœ…[0m agenda-4 (puerto 8084): grupo encontrado (nombre: Grupo Prueba ReplicaciÃ³n)
[0;32mâœ… Grupo replicado correctamente en todos los nodos[0m

[0;32m[8/8] AÃ±adiendo miembro al grupo y verificando replicaciÃ³n...[0m
  [0;32mâœ…[0m Usuario miembro creado: test_member_
  [0;32mâœ…[0m Miembro aÃ±adido al grupo en el lÃ­der
  [0;32mâœ…[0m agenda-1 (puerto 8080): miembro encontrado en el grupo
  [0;32mâœ…[0m agenda-2 (puerto 8082): miembro encontrado en el grupo
  [0;32mâœ…[0m agenda-3 (puerto 8083): miembro encontrado en el grupo
  [0;32mâœ…[0m agenda-4 (puerto 8084): miembro encontrado en el grupo
[0;32mâœ… Miembro de grupo replicado correctamente en todos los nodos[0m

[0;32m[9/11] Actualizando perfil del usuario y verificando replicaciÃ³n...[0m
  [0;32mâœ…[0m Perfil actualizado en el lÃ­der
  [0;32mâœ…[0m agenda-1 (puerto 8080): perfil actualizado (display_name/email)
  [0;32mâœ…[0m agenda-2 (puerto 8082): perfil actualizado (display_name/email)
  [0;32mâœ…[0m agenda-3 (puerto 8083): perfil actualizado (display_name/email)
  [0;32mâœ…[0m agenda-4 (puerto 8084): perfil actualizado (display_name/email)
[0;32mâœ… Perfil replicado correctamente en todos los nodos[0m

[0;32m[10/11] Actualizando contraseÃ±a y verificando hash replicado...[0m
  [0;32mâœ…[0m ContraseÃ±a actualizada en el lÃ­der
  [0;32mâœ…[0m agenda-1 (puerto 8080): hash de contraseÃ±a coincide
  [0;32mâœ…[0m agenda-2 (puerto 8082): hash de contraseÃ±a coincide
  [0;32mâœ…[0m agenda-3 (puerto 8083): hash de contraseÃ±a coincide
  [0;32mâœ…[0m agenda-4 (puerto 8084): hash de contraseÃ±a coincide
[0;32mâœ… Hash de contraseÃ±a replicado correctamente en todos los nodos[0m

[0;32m[11/11] Creando cita de grupo con invitado, aceptando invitaciÃ³n y verificando replicaciÃ³n...[0m
  [0;32mâœ…[0m Cita de grupo creada en el lÃ­der
  [0;32mâœ…[0m InvitaciÃ³n aceptada en el lÃ­der
  [0;32mâœ…[0m agenda-1 (puerto 8080): estado de invitaciÃ³n = accepted
  [0;32mâœ…[0m agenda-2 (puerto 8082): estado de invitaciÃ³n = accepted
  [0;32mâœ…[0m agenda-3 (puerto 8083): estado de invitaciÃ³n = accepted
  [0;32mâœ…[0m agenda-4 (puerto 8084): estado de invitaciÃ³n = accepted
[0;32mâœ… Estado de invitaciÃ³n replicado correctamente en todos los nodos[0m

  [0;32mâœ…[0m agenda-1 (puerto 8080): notificaciÃ³n de invitaciÃ³n aceptada encontrada
  [0;32mâœ…[0m agenda-2 (puerto 8082): notificaciÃ³n de invitaciÃ³n aceptada encontrada
  [0;32mâœ…[0m agenda-3 (puerto 8083): notificaciÃ³n de invitaciÃ³n aceptada encontrada
  [0;32mâœ…[0m agenda-4 (puerto 8084): notificaciÃ³n de invitaciÃ³n aceptada encontrada
[0;32mâœ… Notificaciones de invitaciÃ³n aceptada replicadas correctamente en todos los nodos[0m

[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mâœ… VERIFICACIÃ“N COMPLETA[0m
[0;34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;32mResumen:[0m
  - LÃ­der: agenda-1 (puerto 8080)
  - Usuario de prueba: test_user_1764959511 (ID: 3)
  - Cita de prueba: ID 3
  - Grupo de prueba: Grupo Prueba ReplicaciÃ³n
  - Miembro de grupo: test_member_
  - Nuevo display_name: Usuario Replicado 
  - Nuevo email: test_user_1764959511_@example.com
  - Cita de invitaciÃ³n: ID 4
  - ReplicaciÃ³n: \033[0;32mâœ… FUNCIONANDO\033[0m

[0;34mPara verificar manualmente:[0m
  - Ver estado RAFT: curl -s http://localhost:8080/raft/health | jq
  - Ver agenda (citas): curl -s "http://localhost:8080/api/agenda?start=2025-01-01T00:00:00Z&end=2026-01-01T00:00:00Z" -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozLCJ1c2VybmFtZSI6InRlc3RfdXNlcl8xNzY0OTU5NTExIiwiZXhwIjoxNzY1MDQ1OTExLCJpYXQiOjE3NjQ5NTk1MTF9.zBBIHIlQpWcO_3a4UukeIwaNMV8QMqnuHPmHOkJhZGY" | jq
  - Ver cita especÃ­fica: curl -s http://localhost:8080/api/appointments/3 -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozLCJ1c2VybmFtZSI6InRlc3RfdXNlcl8xNzY0OTU5NTExIiwiZXhwIjoxNzY1MDQ1OTExLCJpYXQiOjE3NjQ5NTk1MTF9.zBBIHIlQpWcO_3a4UukeIwaNMV8QMqnuHPmHOkJhZGY" | jq

[1;33mNota:[0m Para consultar la BD directamente, necesitarÃ­as instalar sqlite3 en los contenedores

